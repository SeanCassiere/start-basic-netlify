import{jsx as o,jsxs as a}from"react/jsx-runtime";import*as d from"react";import{useState as l,Suspense as u}from"react";import{u as c,d as s,i as f,a as m,b as p,c as h}from"./ssr-DVrxIcU9.js";import"h3";import"node:async_hooks";import"node:stream";import"isbot";import"react-dom/server";import"react-dom";function S({promise:e}){var t,i;const n=c(),r=e;if(s(r),r.status==="pending")throw r;if(r.status==="error")throw typeof document<"u"?f(r.error)?(((t=n.options.errorSerializer)==null?void 0:t.deserialize)??m)(r.error.data):r.error:{data:(((i=n.options.errorSerializer)==null?void 0:i.serialize)??p)(r.error),__isServerError:!0};return[r.data,r]}function v(e){const t=o(w,{...e});return e.fallback?o(d.Suspense,{fallback:e.fallback,children:t}):t}function w(e){const[t]=S(e);return e.children(t)}const R=function(){const[t,i]=l(0),{deferredStuff:n}=h.useLoaderData();return a("div",{className:"p-2",children:[o(u,{fallback:"Loading...",children:o(v,{promise:n,children:r=>o("h3",{children:r})})}),a("div",{children:["Count: ",t]}),o("div",{children:o("button",{onClick:()=>i(t+1),children:"Increment"})})]})},g=()=>({deferredStuff:s(new Promise(e=>setTimeout(()=>e("Hello deferred!"),5e3)))});export{R as component,g as loader};
