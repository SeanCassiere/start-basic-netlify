import{d as a,j as n,r as i,u as d,i as c,a as l,b as f}from"./client-D22F4JlR.js";function u(e,s){const r=e;return r.status||(Object.assign(r,{status:"pending"}),r.then(o=>{r.status="success",r.data=o}).catch(o=>{r.status="error",r.error={data:a(o),__isServerError:!0}})),r}function h({promise:e}){var s,r;const o=d(),t=e;if(u(t),t.status==="pending")throw t;if(t.status==="error")throw typeof document<"u"?c(t.error)?(((s=o.options.errorSerializer)==null?void 0:s.deserialize)??l)(t.error.data):t.error:{data:(((r=o.options.errorSerializer)==null?void 0:r.serialize)??a)(t.error),__isServerError:!0};return[t.data,t]}function m(e){const s=n.jsx(x,{...e});return e.fallback?n.jsx(i.Suspense,{fallback:e.fallback,children:s}):s}function x(e){const[s]=h(e);return e.children(s)}const p=function(){const[s,r]=i.useState(0),{deferredStuff:o}=f.useLoaderData();return n.jsxs("div",{className:"p-2",children:[n.jsx(i.Suspense,{fallback:"Loading...",children:n.jsx(m,{promise:o,children:t=>n.jsx("h3",{children:t})})}),n.jsxs("div",{children:["Count: ",s]}),n.jsx("div",{children:n.jsx("button",{onClick:()=>r(s+1),children:"Increment"})})]})},S=()=>({deferredStuff:u(new Promise(e=>setTimeout(()=>e("Hello deferred!"),5e3)))});export{p as component,S as loader};
